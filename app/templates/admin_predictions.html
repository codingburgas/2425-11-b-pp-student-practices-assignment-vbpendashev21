{% extends "base.html" %}

{% block title %}{{ '–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è' if session.get('lang') != 'en' else 'Predictions' }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>üìã {{ '–ü–æ—Å–ª–µ–¥–Ω–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏' if session.get('lang') != 'en' else 'Latest Predictions' }}</h2>

  {% if predictions %}
    <table class="table table-striped table-hover mt-3">
      <thead>
        <tr>
          <th>{{ '–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª' if session.get('lang') != 'en' else 'User' }}</th>
          <th>{{ '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞' if session.get('lang') != 'en' else 'Temperature' }}</th>
          <th>{{ '–£—Å–ª–æ–≤–∏—è' if session.get('lang') != 'en' else 'Condition' }}</th>
          <th>{{ '–û–±–ª–µ–∫–ª–æ' if session.get('lang') != 'en' else 'Outfit' }}</th>
          <th>{{ '–£–≤–µ—Ä–µ–Ω–æ—Å—Ç' if session.get('lang') != 'en' else 'Confidence' }}</th>
          <th>{{ '–û–ø–∏—Å–∞–Ω–∏–µ' if session.get('lang') != 'en' else 'Description' }}</th>
          <th>{{ '–ö–æ–≥–∞' if session.get('lang') != 'en' else 'When' }}</th>
        </tr>
      </thead>
      <tbody>
        {% for p in predictions %}
        <tr>
          <td>{{ p.user.username if p.user else '‚Äî' }}</td>
          <td>{{ p.temperature }} ¬∞C</td>
          <td>
            {% if p.condition == 'sunny' %}{{ '–°–ª—ä–Ω—á–µ–≤–æ' if session.get('lang') != 'en' else 'Sunny' }}
            {% elif p.condition == 'rain' %}{{ '–î—ä–∂–¥' if session.get('lang') != 'en' else 'Rain' }}
            {% elif p.condition == 'snow' %}{{ '–°–Ω—è–≥' if session.get('lang') != 'en' else 'Snow' }}
            {% else %}{{ p.condition }}{% endif %}
          </td>
          <td>{{ p.predicted_outfit }}</td>
          <td>{{ p.confidence | round(2) }}</td>
          <td>{{ p.description or '' }}</td>
          <td>{{ p.timestamp.strftime('%d.%m.%Y %H:%M') }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">{{ '–ù—è–º–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –æ—â–µ.' if session.get('lang') != 'en' else 'No predictions yet.' }}</p>
  {% endif %}
</div>
{% endblock %}
