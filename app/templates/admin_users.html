{% extends "base.html" %}

{% block title %}{{ '–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª' if session.get('lang') != 'en' else 'Admin Panel' }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>üëë {{ '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏' if session.get('lang') != 'en' else 'User Management' }}</h2>

  {% if users %}
    <table class="table table-bordered table-hover mt-3">
      <thead class="table-light">
        <tr>
          <th>ID</th>
          <th>{{ '–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª' if session.get('lang') != 'en' else 'Username' }}</th>
          <th>Email</th>
          <th>{{ '–†–æ–ª—è' if session.get('lang') != 'en' else 'Role' }}</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <td>{{ user.id }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.email }}</td>
          <td>{{ '–ê–¥–º–∏–Ω' if user.role == 'admin' else '–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª' if session.get('lang') != 'en' else ('Admin' if user.role == 'admin' else 'User') }}</td>
          <td>
            {% if user.role != 'admin' %}
              <form method="POST" action="{{ url_for('main.delete_user', user_id=user.id) }}">
                <button class="btn btn-sm btn-danger" onclick="return confirm('{{ '–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏?' if session.get('lang') != 'en' else 'Are you sure?' }}')">
                  {{ '–ò–∑—Ç—Ä–∏–π' if session.get('lang') != 'en' else 'Delete' }}
                </button>
              </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">{{ '–ù—è–º–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏' if session.get('lang') != 'en' else 'No users available.' }}</p>
  {% endif %}
</div>
{% endblock %}
